(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{1126:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(20),o=n.n(r)()("os"),a=function(){try{return o.userInfo().uid}catch(e){return""}}},1131:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n(505),o=n(710),a=n.n(o),i=function(e,t){var n=t.pathSeparator,r=t.getArrayItemReferenceName,o=t.shouldSplit,a=t.isReferenceMagicPropertyName,i=[],c=function(e,t){return i.push({reference:e,object:t}),{[a]:!0,referenceTo:e}};return function e(t,a,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var u in t){var s=a+n+"*";if(o(s)){var l=t[u],p=r(l,i),d=i+n+p;t[u]=c(d,l),e(l,s,d)}else{var f=i+n+u;e(t[u],s,f)}}else for(var m in t){var v=a+n+m,h=i+n+m;if(o(v)){var g=t[m];t[m]=c(h,g),e(g,v,h)}else e(t[m],v,h)}}(e,"",""),i},c=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map((function(o){var i=function(e){return!0===e[n]?e:null}(t[o]);return i?r(i.referenceTo).then((function(n){return t[o]=n,e(t[o],a+1)})):e(t[o],a+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},u=function(e){return function(t){return e.has(t)}},s=function(e){var t={};return function(n,o){var i=n[e];if("string"!==typeof i)throw new Error("Property ".concat(e," is not a string"));t[o]=t[o]||{};var c=Object(r.a)(a()(i),(function(e){return!!t[o][e]}));return t[o][c]=!0,c}}},1132:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return S}));var r=n(4),o=n(0),a=n.n(o),i=n(2),c=n(507),u=n(20),s=n.n(u),l=n(1131),p=n(561),d=n(511),f=n.n(d),m=e.gd,v=s()("fs-extra"),h=s()("path"),g=s()("@electron/remote"),b=g?g.dialog:null,w=function(e,t){var n=performance.now();return new Promise((function(r,o){v.readFile(e,{encoding:"utf8"},(function(a,i){if(a)return o(a);""===i&&o(new Error("Written file is empty, did the write fail?")),i!==t&&o(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-n;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),r()}))}))},E=function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==t){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,v.ensureDir(h.dirname(n));case 6:return e.next=8,v.writeFile(n,t);case 8:return e.next=10,w(n,t);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify(t,null,2),e.next=3,E(r,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e,t,n){var r=Object(c.b)(e);if(e.isFolderProject()){var o=Object(l.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(l.a)("name"),shouldSplit:Object(l.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(o.map((function(e){return j(e.object,h.join(n,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return j(r,t).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return j(r,t).catch((function(e){throw console.error("Unable to write the project:",e),e}))},P=function(e,t){var n=t.fileIdentifier;if(!n)return Promise.reject('Project file is empty, "Save as" should have been called?');var r=h.dirname(n);return x(e,n,r).then((function(){return{wasSaved:!0,fileMetadata:t}}))},O=function(e,t){var n=t?t.fileIdentifier:"",o=f()(new m.AbstractFileSystemJS,p.a),a=g.getCurrentWindow(),i={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!b)return Promise.reject("Unsupported");var c=b.showSaveDialogSync(a,i);if(!c)return Promise.resolve({wasSaved:!1,fileMetadata:t});var u=h.dirname(c);return m.ProjectResourcesCopier.copyAllResourcesTo(e,o,u,!0,!1,!0),e.setProjectFile(c),x(e,c,u).then((function(){return{wasSaved:!0,fileMetadata:Object(r.a)(Object(r.a)({},t),{},{fileIdentifier:c})}}))},S=function(e,t){var n=t.fileIdentifier+".autosave";return E(Object(c.a)(e),n).catch((function(e){throw console.error("Unable to write ".concat(n,":"),e),e}))}}).call(this,n(25))},1153:function(e,t,n){"use strict";var r=n(4),o=n(20),a=n.n(o),i=n(1131),c=a()("fs"),u=a()("path"),s=a()("@electron/remote"),l=s?s.dialog:null,p=function(e){return c?new Promise((function(t,n){c.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},d=function(){if(!l)return Promise.reject("Not supported");var e=s.getCurrentWindow();return l.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?{fileIdentifier:t[0]}:null}))},f=function(e){var t=e.fileIdentifier,n=u.dirname(t);return p(t).then((function(e){return Object(i.d)(e,{getReferencePartialObject:function(e){return p(u.join(n,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},m=function(e,t){var n=e.fileIdentifier,r=n+".autosave";if(c.existsSync(r)){if(!t)return Promise.resolve(!0);try{if(c.statSync(r).mtime.getTime()>c.statSync(n).mtime.getTime())return Promise.resolve(!0)}catch(o){return console.error("Unable to compare *.autosave to project",o),Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)},v=function(e){return Promise.resolve(Object(r.a)(Object(r.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},h=n(1132),g=n(31);t.a={internalName:"LocalFile",name:{id:"Local file system"},getFileMetadataFromAppArguments:function(e){return e[g.a]&&e[g.a].length?{fileIdentifier:e[g.a][0]}:null},createOperations:function(){return{onOpenWithPicker:d,onOpen:f,hasAutoSave:m,onSaveProject:h.b,onSaveProjectAs:h.c,onAutoSaveProject:h.a,onGetAutoSave:v,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorizations to open it."}}}}}},1852:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n(36),c=n(866),u=n(550),s=n(20),l=n.n(s),p=n(31),d=l()("@electron/remote"),f=d?d.dialog:null,m=l()("path"),v=Object(i.a)(c.a.map((function(e){var t=e.kind,n=(e.displayName,e.fileExtensions),r=e.createNewResource;return{name:"local-file-opener-"+t,displayName:{id:"Choose a file"},displayTab:"import",kind:t,selectResourcesHeadless:function(){var e=Object(a.a)(o.a.mark((function e(a){var i,c,s,l,v,h,g,b,w,E,j,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.i18n,c=a.getLastUsedPath,s=a.setLastUsedPath,l=a.project,v=a.options,f){e.next=3;break}throw new Error("Electron dialog not supported in this environment.");case 3:return h=["openFile"],v.multiSelection&&h.push("multiSelections"),g=m.dirname(l.getProjectFile()),b=c(l,t)||g,w=d.getCurrentWindow(),e.next=10,f.showOpenDialog(w,{title:i._({id:"Choose a file"}),properties:h,filters:[{name:i._({id:"Supported files"}),extensions:n}],defaultPath:b});case 10:if(E=e.sent,(j=E.filePaths)&&j.length){e.next=14;break}return e.abrupt("return",[]);case 14:if(x=m.parse(j[0]).dir,s(l,t,x),!j.filter((function(e){return!Object(u.f)(l,e)})).length){e.next=23;break}if(!p.b.showConfirmDialog(i._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"}))){e.next=23;break}return e.next=22,Object(u.b)(l,j);case 22:j=e.sent;case 23:return e.abrupt("return",j.map((function(e){var t=r(),n=m.dirname(l.getProjectFile());return t.setFile(m.relative(n,e)),t.setName(m.relative(n,e)),t})));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renderComponent:function(){return null}}})));t.a=v},1853:function(e,t,n){"use strict";var r=n(1854),o=n(1855),a=n(1856),i=n(84),c=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(i.m)("piskel"),Object(r.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(i.m)("jfxr"),Object(o.a)(e)}},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:function(e){return Object(i.m)("yarn"),Object(a.a)(e)}}];t.a=c},1854:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(4),o=n(20),a=n.n(o),i=n(550),c=a()("electron"),u=a()("path"),s=c?c.ipcRenderer:null,l=e.gd,p=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,a=e.onChangesSaved,p=e.extraOptions;if(c&&s){var d=n.map((function(e,n){return{resourcePath:Object(i.d)(t,e),resourceName:e,originalIndex:n}})),f=u.dirname(t.getProjectFile()),m=Object(r.a)(Object(r.a)({},p),{},{resources:d,singleFrame:o,projectPath:f});s.removeAllListeners("piskel-changes-saved"),s.on("piskel-changes-saved",(function(e,n,r,o){var c=o.data?{pskl:o}:null,s=t.getResourcesManager();n.forEach((function(e){e.name=u.relative(f,e.path),Object(i.c)(t,new l.ImageResource,e.name)})),n[0].metadata=c,n[0].newAnimationName=r,o.singleFrame?(c&&s.getResource(u.relative(f,n[0].path)).setMetadata(JSON.stringify(c)),a(n)):a(n)})),s.send("piskel-open-then-load-animation",m)}}}).call(this,n(25))},1855:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(20),o=n.n(r),a=n(550),i=o()("electron"),c=o()("path"),u=i?i.ipcRenderer:null,s=e.gd,l=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&u){var l=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.d)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:l};u.removeAllListeners("jfxr-changes-saved"),u.on("jfxr-changes-saved",(function(e,n,o){var i=c.relative(l,n);Object(a.c)(t,new s.AudioResource,i);var u={jfxr:o};t.getResourcesManager().getResource(i).setMetadata(JSON.stringify(u)),r([{metadata:u,name:i}])})),u.send("jfxr-create-wav",p)}}}).call(this,n(25))},1856:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(20),o=n.n(r),a=n(550),i=o()("electron"),c=o()("path"),u=i?i.ipcRenderer:null,s=e.gd,l=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&u){var l=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.d)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:l};u.removeAllListeners("yarn-changes-saved"),u.on("yarn-changes-saved",(function(e,n){var o=c.relative(l,n);Object(a.c)(t,new s.JsonResource,o),r([{name:o}])})),u.send("yarn-create-json",p)}}}).call(this,n(25))},1857:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(4),o=n(6),a=n(7),i=n(12),c=n(11),u=n(10),s=n(1),l=n(561),p=n(20),d=n.n(p),f=n(1114),m=n(546),v=n(1858),h=n(511),g=n.n(h),b=n(798),w=n(1867),E=d()("electron"),j=d()("@electron/remote"),x=d()("path"),P=E?E.ipcRenderer:null,O=j?j.BrowserWindow:null,S=e.gd,y=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,devToolsOpen:!1,previewBrowserWindowConfig:null,hotReloadsCount:0,hideMenuBar:!0,alwaysOnTop:!0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){var t=e.state,n=t.previewGamePath,o=t.previewBrowserWindowConfig;if(O&&o&&n){var a=Object(r.a)(Object(r.a)({},o),{},{parent:e.state.alwaysOnTop?O.getFocusedWindow():null}),i=new O(a);j.require("@electron/remote/main").enable(i.webContents),i.loadURL("file://".concat(n,"/index.html")),i.setMenuBarVisibility(e.state.hideMenuBar),i.webContents.on("devtools-opened",(function(){e.setState({devToolsOpen:!0})})),i.webContents.on("devtools-closed",(function(){e.setState({devToolsOpen:!1})})),e.state.devToolsOpen&&i.openDevTools()}},e._openPreviewWindow=function(t,n,r){e.setState({previewBrowserWindowConfig:{width:t.getGameResolutionWidth(),height:t.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(t.getName()),backgroundColor:"#000000",webPreferences:{webSecurity:!1,nodeIntegration:!0,contextIsolation:!1}},previewGamePath:n,hideMenuBar:!r.getIsMenuBarHiddenInPreview(),alwaysOnTop:r.getIsAlwaysOnTopInPreview()},(function(){if(r.networkPreview){if(!P)return;P.removeAllListeners("serve-folder-done"),P.removeAllListeners("local-network-ips"),P.on("serve-folder-done",(function(t,n,r){n?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:n}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:r.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),P.on("local-network-ip",(function(t,n){e.setState({networkPreviewHost:n})})),P.send("serve-folder",{root:n}),P.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(m.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=g()(new S.AbstractFileSystemJS,l.a);return{outputDir:x.join(n.getTempDir(),"preview"),exporter:new S.Exporter(n,t),gdjsRoot:t}}))},e.launchPreview=function(t){var n=t.project,r=t.layout,o=t.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(a){var i=a.outputDir,c=a.exporter,u=a.gdjsRoot;Object(f.a)((function(){var a=new S.PreviewExportOptions(n,i);a.setLayoutName(r.getName()),o&&a.setExternalLayoutName(o.getName());var s=Object(w.a)();s&&a.useWebsocketDebuggerClientWithServerAddress(s.address,""+s.port);var l=e.props.getIncludeFileHashs();for(var p in l){var d=l[p];a.setIncludeFileHash(p,d)}a.setElectronRemoteRequirePath(x.join(u,"../preview_node_modules","@electron/remote","renderer/index.js"));var f=e.getPreviewDebuggerServer().getExistingDebuggerIds(),m=t.hotReload&&!!f.length;a.setProjectDataOnlyExport(m&&t.projectDataOnlyExport),a.setFullLoadingScreen(t.fullLoadingScreen),c.exportProjectForPixiPreview(a),a.delete(),c.delete(),m?(f.forEach((function(t){e.getPreviewDebuggerServer().sendMessage(t,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(n,i,t)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkHasSubscription()},e}return Object(a.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return w.b}},{key:"render",value:function(){var e=this,t=this.state,n=t.networkPreviewDialogOpen,r=t.networkPreviewHost,o=t.networkPreviewPort,a=t.networkPreviewError;return s.createElement(s.Fragment,null,s.createElement(b.a,{ref:function(t){return e._networkPreviewSubscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:s.createElement(u.Trans,{id:"Preview over wifi"}),mode:"try"}),s.createElement(b.a,{ref:function(t){return e._hotReloadSubscriptionChecker=t},onChangeSubscription:function(){e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Hot reloading",title:s.createElement(u.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),s.createElement(v.a,{open:n,url:r&&o?"".concat(r,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}]),n}(s.Component)}).call(this,n(25))},1858:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(6),o=n(7),a=n(12),i=n(11),c=n(10),u=n(1),s=n(144),l=n(142),p=n(481),d=n(476),f=n(27),m=n(494),v=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.open,r=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return n?u.createElement(s.a,{actions:[u.createElement(l.a,{key:"close",label:u.createElement(c.Trans,{id:"Close"}),primary:!0,onClick:a})],secondaryActions:[o&&u.createElement(l.a,{key:"export",label:u.createElement(c.Trans,{id:"Export game"}),onClick:o}),u.createElement(l.a,{key:"run-preview-locally",label:u.createElement(c.Trans,{id:"Run on this computer"}),onClick:i})],cannotBeDismissed:!0,open:n,onRequestClose:a},r&&u.createElement(f.c,null,u.createElement(d.a,null,u.createElement(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."}))),!r&&!t&&u.createElement(m.a,null),!r&&t&&u.createElement("div",null,u.createElement(f.c,null,u.createElement(d.a,null,u.createElement(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"}))),u.createElement(p.b,{value:t,fullWidth:!0}),u.createElement(f.c,null,u.createElement(d.a,null,u.createElement(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."}))))):null}}]),n}(u.Component)},1867:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var r=n(20),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i="stopped",c=null,u=[],s=[],l={startServer:function(){if(!a)return Promise.reject();if("started"===i)return Promise.resolve();var e=new Promise((function(e,t){var n=!1;i="stopped",c=null,a&&(a.removeAllListeners("debugger-send-message-done"),a.removeAllListeners("debugger-error-received"),a.removeAllListeners("debugger-connection-closed"),a.removeAllListeners("debugger-connection-opened"),a.removeAllListeners("debugger-start-server-done"),a.removeAllListeners("debugger-message-received")),a.on("debugger-error-received",(function(e,r){n||(t(r),n=!0),u.forEach((function(e){return(0,e.onErrorReceived)(r)}))})),a.on("debugger-connection-closed",(function(e,t){var n=t.id,r=s.indexOf(n);-1!==r&&s.splice(r,1),u.forEach((function(e){return(0,e.onConnectionClosed)({id:n,debuggerIds:s})}))})),a.on("debugger-connection-opened",(function(e,t){var n=t.id;s.push(n),u.forEach((function(e){return(0,e.onConnectionOpened)({id:n,debuggerIds:s})}))})),a.on("debugger-start-server-done",(function(t,r){var o=r.address;console.info("Local preview debugger started"),i="started",c=o,n||(e(),n=!0),u.forEach((function(e){return(0,e.onServerStateChanged)()}))})),a.on("debugger-message-received",(function(e,t){var n=t.id,r=t.message;console.info("Processing message received for debugger");try{var o=JSON.parse(r);u.forEach((function(e){return(0,e.onHandleParsedMessage)({id:n,parsedMessage:o})}))}catch(a){console.warn("Error while parsing message received from debugger client:",a)}})),a.send("debugger-start-server")})),t=new Promise((function(e,t){setTimeout((function(){t(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,t])},sendMessage:function(e,t){a&&("stopped"!==i?a.send("debugger-send-message",{id:e,message:JSON.stringify(t)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return i},getExistingDebuggerIds:function(){return s},registerCallbacks:function(e){return u.push(e),function(){var t=u.indexOf(e);-1!==t&&u.splice(t,1)}}},p=function(){return c}},1868:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return E}));var r=n(4),o=n(1869),a=n(1870),i=n(1871),c=n(1872),u=n(1874),s=n(1875),l=n(1876),p=n(735),d=n(746),f=n(745),m=n(738),v=n(739),h=n(740),g=n(736),b=Object(r.a)(Object(r.a)({},d.c),{},{exportPipeline:l.a}),w=[Object(r.a)(Object(r.a)({},f.c),{},{exportPipeline:i.a}),Object(r.a)(Object(r.a)({},v.b),{},{exportPipeline:u.a}),Object(r.a)(Object(r.a)({},h.b),{},{exportPipeline:s.a}),Object(r.a)(Object(r.a)({},m.c),{},{exportPipeline:c.a})],E=[Object(r.a)(Object(r.a)({},f.c),{},{exportPipeline:i.a}),Object(r.a)(Object(r.a)({},p.c),{},{exportPipeline:o.a}),Object(r.a)(Object(r.a)({},g.c),{},{exportPipeline:a.a})]},1869:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var r=n(10),o=n(1),a=n.n(o),i=n(143),c=n(27),u=n(546),s=n(561),l=n(734),p=n(511),d=n.n(p),f=n(20),m=n.n(f),v=n(735),h=m()("electron"),g=h?h.shell:null,b=e.gd,w={name:"local-cordova",packageNameWarningType:"mobile",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.c,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(v.b,null))),a.a.createElement(c.c,null,a.a.createElement(l.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,s.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForCordova",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openPath(t.outputDir)});return a.a.createElement(v.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(25))},1870:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var r=n(10),o=n(1),a=n.n(o),i=n(143),c=n(27),u=n(546),s=n(561),l=n(734),p=n(511),d=n.n(p),f=n(20),m=n.n(f),v=n(736),h=m()("electron"),g=h?h.shell:null,b=e.gd,w={name:"local-electron",packageNameWarningType:"desktop",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.c,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(v.b,null))),a.a.createElement(c.c,null,a.a.createElement(l.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,s.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForElectron",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openPath(t.outputDir)});return a.a.createElement(v.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(25))},1871:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var r=n(10),o=n(1),a=n.n(o),i=n(143),c=n(27),u=n(546),s=n(561),l=n(734),p=n(511),d=n.n(p),f=n(20),m=n.n(f),v=n(745),h=m()("electron"),g=h?h.shell:null,b=e.gd,w={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.c,null,a.a.createElement(v.b,null)),a.a.createElement(c.c,null,a.a.createElement(l.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,s.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState;e.onClose;return a.a.createElement(v.a,{renderGameButton:function(){return a.a.createElement(i.a,{fullWidth:!0,primary:!0,onClick:function(){g&&g.openPath(t.outputDir)},label:a.a.createElement(r.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,n(25))},1872:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P}));var r=n(10),o=n(1),a=n.n(o),i=n(143),c=n(27),u=n(546),s=n(561),l=n(511),p=n.n(l),d=n(20),f=n.n(d),m=n(1873),v=n(737),h=n(738),g=f()("path"),b=f()("electron"),w=f()("@electron/remote"),E=w?w.app:null,j=b?b.shell:null,x=e.gd,P={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:E?g.join(E.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},isNavigationDisabled:function(){return!1},renderHeader:function(e){e.project;var t=e.exportState,n=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.c,null,a.a.createElement(h.b,null)),a.a.createElement(c.c,null,a.a.createElement(m.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:E?E.getPath("documents"):"",onChange:function(e){return n((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=p()(new x.AbstractFileSystemJS,s.a),r=new x.Exporter(n,t),o=g.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new x.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir;return Object(v.a)({path:n,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){j&&g&&j.openPath(g.dirname(t.archiveOutputFilename))});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(25))},1873:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(4),o=n(6),a=n(7),i=n(12),c=n(11),u=n(10),s=n(1),l=n.n(s),p=n(481),d=n(20),f=n.n(d),m=n(143),v=f()("electron"),h=f()("@electron/remote"),g=h?h.dialog:null,b={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},w=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChooseFolder=function(){if(g&&v){var t=h.getCurrentWindow();return g.showSaveDialog(t,{title:e.props.title,filters:e.props.filters,message:e.props.message,defaultPath:e.props.defaultPath}).then((function(t){var n=t.filePath;e.props.onChange(n||"")}))}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},b.container),{},{width:this.props.fullWidth?"100%":void 0})},l.a.createElement(p.b,{margin:"dense",style:b.textField,type:"text",hintText:{id:"Choose a file"},value:this.props.value,onChange:function(t,n){return e.props.onChange(n)}}),l.a.createElement(m.a,{label:l.a.createElement(u.Trans,{id:"Choose"}),style:b.button,onClick:this.onChooseFolder}))}}]),n}(s.PureComponent)},1874:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(10),o=n(1),a=n(511),i=n.n(a),c=n(532),u=n(870),s=n(546),l=n(737),p=n(20),d=n.n(p),f=n(561),m=n(739),v=d()("path"),h=d()("os"),g=e.gd,b={name:"local-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,t,n){return t||""===n},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return o.createElement(m.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=v.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForCordova",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=h.tmpdir();return Object(l.a)({path:n,outputFilename:v.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(u.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r){var o=t.getAuthorizationHeader,a=t.firebaseUser;return a?Object(c.a)(o,a.uid,n,e.targets,e.keystore,r):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(25))},1875:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(10),o=n(1),a=n(511),i=n.n(a),c=n(532),u=n(546),s=n(870),l=n(737),p=n(20),d=n.n(p),f=n(561),m=n(740),v=d()("path"),h=d()("os"),g=e.gd,b={name:"local-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,t,n){return!!e.targets.length&&(t||""===n)},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return o.createElement(m.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=v.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForElectron",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=h.tmpdir();return Object(l.a)({path:n,outputFilename:v.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r){var o=t.getAuthorizationHeader,a=t.firebaseUser;return a?Object(c.b)(o,a.uid,n,e.targets,r):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(25))},1876:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(10),o=n(1),a=n(511),i=n.n(a),c=n(532),u=n(870),s=n(546),l=n(737),p=n(20),d=n.n(p),f=n(561),m=n(746),v=d()("path"),h=d()("os"),g=e.gd,b={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,t,n){return t||""===n||"done"===n},isNavigationDisabled:function(e,t){return!t&&!["","done"].includes(e)},renderHeader:function(){return o.createElement(m.a,null)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var t=e.build,n=e.project,r=e.onSaveProject,a=e.errored,i=e.exportStep;return o.createElement(m.b,{build:t,project:n,onSaveProject:r,errored:a,exportStep:i})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=v.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=h.tmpdir();return Object(l.a)({path:n,outputFilename:v.join(r,"game-archive.zip"),sizeLimit:25e7})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(u.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r){var o=t.getAuthorizationHeader,a=t.firebaseUser;return a?Object(c.c)(o,a.uid,n,r):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(25))},1878:function(e,t,n){"use strict";var r=n(1),o=n(20),a=n.n(o),i=n(558),c=n(568),u=n(95),s=a()("electron"),l=s?s.ipcRenderer:null,p=function(e,t){r.useEffect((function(){if(l){var n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,r)};return l.on(e,n),function(){return l.removeListener(e,n)}}}),[e,t])};t.a=function(e){var t=e.i18n,n=e.project,o=e.recentProjectFiles,a=e.onOpenRecentFile,s=Object(c.e)(),d=t.language;return p("main-menu-open",e.onChooseProject),p("main-menu-open-recent",e.onOpenRecentFile),p("main-menu-save",e.onSaveProject),p("main-menu-save-as",e.onSaveProjectAs),p("main-menu-close",e.onCloseProject),p("main-menu-close-app",e.onCloseApp),p("main-menu-export",e.onExportProject),p("main-menu-create",e.onCreateProject),p("main-menu-open-project-manager",e.onOpenProjectManager),p("main-menu-open-home-page",e.onOpenHomePage),p("main-menu-open-debugger",e.onOpenDebugger),p("main-menu-open-about",e.onOpenAbout),p("main-menu-open-preferences",e.onOpenPreferences),p("main-menu-open-language",e.onOpenLanguage),p("main-menu-open-profile",e.onOpenProfile),p("main-menu-open-games-dashboard",e.onOpenGamesDashboard),p("update-status",e.setUpdateStatus),r.useEffect((function(){!function(e,t,n,r){var o={label:t._({id:"File"}),submenu:[{label:t._({id:"Create a New Project..."}),accelerator:Object(c.a)(r.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create"},{type:"separator"},{label:t._({id:"Open..."}),accelerator:Object(c.a)(r.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:t._({id:"Open Recent"}),submenu:n.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}}))},{type:"separator"},{label:t._({id:"Save"}),accelerator:Object(c.a)(r.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!e},{label:t._({id:"Save as..."}),accelerator:Object(c.a)(r.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:!!e},{type:"separator"},{label:t._({id:"Export (web, iOS, Android)..."}),accelerator:Object(c.a)(r.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!e},{type:"separator"},{label:t._({id:"Close Project"}),accelerator:Object(c.a)(r.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!e}]};Object(u.e)()||o.submenu.push({type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{label:t._({id:"Exit GDevelop"}),accelerator:Object(c.a)(r.QUIT_APP),onClickSendEvent:"main-menu-close-app"});var a={label:t._({id:"Edit"}),submenu:[{label:t._({id:"Undo"}),role:"undo"},{label:t._({id:"Redo"}),role:"redo"},{type:"separator"},{label:t._({id:"Cut"}),role:"cut"},{label:t._({id:"Copy"}),role:"copy"},{label:t._({id:"Paste"}),role:"paste"},{label:t._({id:"Paste and Match Style"}),role:"pasteandmatchstyle"},{label:t._({id:"Delete"}),role:"delete"},{label:t._({id:"Select All"}),role:"selectall"}]},i={label:t._({id:"View"}),submenu:[{label:t._({id:"Show Project Manager"}),accelerator:Object(c.a)(r.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!e},{label:t._({id:"Show Home"}),onClickSendEvent:"main-menu-open-home-page"},{label:t._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!e},{type:"separator"},{label:t._({id:"Toggle Developer Tools"}),role:"toggledevtools"},{type:"separator"},{label:t._({id:"Toggle Fullscreen"}),role:"togglefullscreen"}]},s={label:t._({id:"Window"}),role:"window",submenu:[{label:t._({id:"Minimize"}),role:"minimize"}]},p={label:t._({id:"Help"}),role:"help",submenu:[{label:t._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:t._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:t._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/gdevelop"},{type:"separator"},{label:t._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:t._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:t._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:t._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(u.e)()||p.submenu.push({type:"separator"},{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var d=[o,a,i,s,p];Object(u.e)()&&(d.unshift({label:t._({id:"GDevelop 5"}),submenu:[{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),a.submenu.push({type:"separator"},{label:t._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),s.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),l&&l.send("set-main-menu",d)}(n,t,o,s)}),[t,d,n,o,s]),Object(i.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:r.useCallback((function(){return o.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return a(e)}}}))}),[a,o])}),null}},1879:function(e,t,n){var r=n(1127).loadExtension,o=n(20),a=n(1880).findJsExtensionModules;e.exports=function(e){var t=e.gd,n=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples,u=e.onFindGDJS;return{loadAllExtensions:function(e){return a({filterExamples:c,onFindGDJS:u}).then((function(a){return Promise.all(a.map((function(a){var c=null;try{c=o(a,{rethrowException:!0})}catch(u){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:u}}}return c?(n&&c.registerEditorConfigurations&&c.registerEditorConfigurations(n),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:a,result:r(e,t,t.JsPlatform.get(),c)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},1880:function(e,t,n){var r=n(546).findGDJS,o=n(20),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples,n=e.onFindGDJS;return(n?n():r()).then((function(e){var n=e.gdjsRoot,r=a.join(n,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(r,"...")),new Promise((function(e,n){i.readdir(r,(function(o,c){if(o)return n(o);var u=c.filter((function(e){return!t||-1===e.indexOf("Example")}));Promise.all(u.map((function(e){return t=a.join(r,e),new Promise((function(e){var n=a.join(t,"JsExtension.js");i.stat(n,(function(t,r){return e(t?null:r.isFile()?n:null)}))}));var t}))).then((function(t){e(t.filter((function(e){return!!e})))}),n)}))}))}))}}},1881:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(20),o=n.n(r),a=n(1126),i=n(710),c=n.n(i),u=o()("path"),s=o()("os"),l=o()("fs"),p=function(e){var t=e.onWriteFile,n=u.join(s.tmpdir(),"GDGeneratedEventsFunctions-"+Object(a.a)());l.mkdir(n,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var r=function(e){return"".concat(n,"/").concat(c()(e),".js")};return{getIncludeFileFor:function(e){return r(e)},writeFunctionCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),l.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))},writeBehaviorCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),l.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))}}}},1893:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(6),o=n(507),a=n(20),i=n.n(a),c=i()("fs-extra"),u=i()("path"),s=i()("@electron/remote"),l=s?s.dialog:null,p=function e(){Object(r.a)(this,e)};p.chooseEventsFunctionExtensionFile=function(e){if(!l)return Promise.reject("Not supported");var t=s.getCurrentWindow();return l.showSaveDialog(t,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:e||"Extension.json"}).then((function(e){var t=e.filePath;return t||null}))},p.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!c)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return c.ensureDir(u.dirname(t)).then((function(){return new Promise((function(e,r){c.writeFile(t,n,(function(t){return t?r(t):e()}))}))}))}catch(r){return Promise.reject(r)}}(Object(o.b)(e),t).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))}},1894:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),o=n(20),a=n.n(o),i=a()("fs"),c=a()("@electron/remote"),u=c?c.dialog:null,s=function e(){Object(r.a)(this,e)};s.chooseEventsFunctionExtensionFile=function(){if(!u)return Promise.reject("Not supported");var e=c.getCurrentWindow();return u.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?t[0]:null}))},s.readEventsFunctionExtensionFile=function(e){return function(e){return i?new Promise((function(t,n){i.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},1895:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(1),o=n(20),a=n.n(o),i=n(43),c=n(563),u=n.n(c),s=a()("electron"),l=a()("child_process"),p=a()("process"),d=a()("path"),f=a()("chokidar"),m=function(){if(!s)return"";var e=p.cwd();return d.join(e,"../app")},v=function(){return l&&d?new Promise((function(e,t){var n=performance.now();l.exec('node "'.concat(d.join(m(),"scripts/import-GDJS-Runtime.js"),'" --skip-clean --skip-sources'),(function(r,o,a){if(r)return console.error("GDJS Runtime update error:\n".concat(r)),void t(r);var i=(performance.now()-n).toFixed(0);if(console.info("GDJS Runtime updated in ".concat(i,"ms:\n").concat(o)),a)return console.error("GDJS Runtime update error:\n".concat(a)),void t(new Error("Error while updating GDJS Runtime"));e()}))})):Promise.reject(new Error("Unsupported"))},h=u()((function(e,t){var n=e||"unknown-event",r=t||"unknown-file";console.info('GDJS/extensions watchers found a "'.concat(n,'" in ').concat(r,", updating GDJS Runtime...")),v().catch((function(){}))}),100),g=function(){var e=r.useContext(i.a).values.useGDJSDevelopmentWatcher;return r.useEffect((function(){if(e){var t=performance.now();if(f){var n=["../../GDJS/Runtime/**/*","../../Extensions/**/*.ts","../../Extensions/**/*.js"].map((function(e){return d.join(m(),e)}));v().catch((function(){}));var r=f.watch(n,{awaitWriteFinish:!0,ignoreInitial:!0}).on("all",h).on("error",(function(e){return console.error("Error in watcher for GDJS Runtime - manually call npm run `node import-GDJS-Runtime.js` in the newIDE/app/scripts folder if you make changes to GDJS. Error:",e)})).on("ready",(function(){var e=(performance.now()-t).toFixed(2);console.info("Watchers for GDJS Runtime/extensions installed in ".concat(e,"ms."))}));return function(){return r.close()}}console.error("Unable to use 'chokidar' from Node.js to watch changes in GDJS.")}}),[e]),null}},1910:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return w}));var r=n(0),o=n.n(r),a=n(2),i=n(65),c=n.n(i),u=n(1153),s=n(20),l=n.n(s),p=n(618),d=n(84),f=n(64),m=n(1132),v=e.gd,h=l()("path"),g=l()("fs-extra"),b=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.i18n,r=t.settings,a=r.projectName,i=r.outputPath,g&&i){e.next=4;break}return e.abrupt("return");case 4:e.prev=4,g.mkdirsSync(i),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(4),Object(f.a)({message:n._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:i}}),rawError:e.t0,errorId:"local-example-creation-error"}),e.abrupt("return");case 12:return c=v.ProjectHelper.createNewGDJSProject(),s=h.join(i,"game.json"),c.setProjectFile(s),Object(d.p)({exampleUrl:"",exampleSlug:""}),e.abrupt("return",{project:c,storageProvider:u.a,fileMetadata:{fileIdentifier:s},projectName:a});case 17:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,a,i,s,l,v,b,w;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.i18n,r=t.exampleShortHeader,a=t.settings,i=a.projectName,s=a.outputPath,g&&s){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(p.a)(r);case 7:return l=e.sent,g.mkdirsSync(s),e.next=11,c.a.get(l.projectFileUrl,{responseType:"text",transformResponse:[function(e){return e}]});case 11:return v=e.sent,b=v.data,w=h.join(s,"game.json"),e.next=16,Object(m.d)(b,w);case 16:return Object(d.p)({exampleUrl:l.projectFileUrl,exampleSlug:r.slug}),e.abrupt("return",{storageProvider:u.a,fileMetadata:{fileIdentifier:w},projectName:i});case 20:return e.prev=20,e.t0=e.catch(4),Object(f.a)({message:n._({id:"Unable to load the example or save it on disk."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"local-example-load-error"}),e.abrupt("return");case 24:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(25))},2094:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n(20),c=n.n(i),u=n(505),s=n(1896),l=n.n(s),p=function(){var e=Object(a.a)(o.a.mark((function e(t,n){var r,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.times,a=0,i=null;case 3:if(!(a<r)){e.next=18;break}return a++,i=null,e.prev=6,e.next=9,n();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(6),i=e.t0;case 16:e.next=3;break;case 18:throw i;case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}();n.d(t,"a",(function(){return b}));var d=c()("electron"),f=d?d.ipcRenderer:null,m=c()("fs-extra"),v=c()("path"),h=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().filter((function(e){var n,r=t.getResource(e);return(n=r.getFile()).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")}))},g=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,i,c,s,d,g,b,w,E,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.resourceNames,i=t.onProgress,m&&f){e.next=3;break}throw new Error("Unsupported");case 3:return c=n.getResourcesManager(),s=v.dirname(n.getProjectFile()),d=v.join(s,"assets"),g=new Set,b=[],w=[],E=0,j=h(n),e.abrupt("return",l.a.withConcurrency(50).for(r).process(function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,l,h,x,P;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.getResource(t),r=n.getFile(),l=v.extname(r),h=v.basename(r,l),x=Object(u.a)(h,(function(e){var t=v.join(d,e)+l;return m.existsSync(t)||g.has(t)})),P=v.join(d,x)+l,g.add(P),e.prev=7,e.next=10,p({times:2},Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ensureDir(d);case 2:return e.next=4,f.invoke("local-file-download",r,P);case 4:n.setFile(v.relative(s,P).replace(/\\/g,"/")),w.push({resourceName:t});case 6:case"end":return e.stop()}}),e)}))));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),b.push({resourceName:t,error:e.t0});case 15:i(E++,j.length);case 16:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){return{fetchedResources:w,erroredResources:b}})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b={getResourcesToFetch:h,fetchResources:g}},453:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",(function(){return k}));var r=n(1),o=n.n(r),a=n(885),i=n(31),c=n(1145),u=n(1146),s=(n(111),n(232),n(1852)),l=n(1853),p=n(1857),d=n(1868),f=n(1878),m=n(1879),v=n.n(m),h=n(1881),g=n(729),b=n(545),w=n(1142),E=n(1893),j=n(1894),x=n(1130),P=n(1153),O=n(1895),S=n(2094),y=n(1910),D=e.gd,k=function(e){i.b.setUpContextMenu();var t=i.b.getArguments(),n=i.b.isDev();return o.a.createElement(w.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:h.a,eventsFunctionsExtensionWriter:E.a,eventsFunctionsExtensionOpener:j.a,resourceFetcher:S.a},(function(e){var r=e.i18n;return o.a.createElement(x.a,{appArguments:t,storageProviders:[P.a],defaultStorageProvider:P.a},(function(e){var t=e.getStorageProviderOperations,i=e.storageProviders,m=e.initialFileMetadataToOpen,h=e.getStorageProvider;return o.a.createElement(a.a,{i18n:r,renderMainMenu:function(e){return o.a.createElement(f.a,e)},renderPreviewLauncher:function(e,t){return o.a.createElement(p.a,Object.assign({},e,{ref:t}))},renderExportDialog:function(e){return o.a.createElement(c.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:d.a,manualExporters:d.b,onlineWebExporter:d.c})},renderCreateDialog:function(e){return o.a.createElement(u.a,{open:e.open,onClose:e.onClose,onOpen:e.onOpen,initialTab:e.initialTab,onCreateBlank:y.a,onCreateFromExampleShortHeader:y.b})},renderGDJSDevelopmentWatcher:n?function(){return o.a.createElement(O.a,null)}:null,onCreateFromExampleShortHeader:y.b,onCreateBlank:y.a,storageProviders:i,getStorageProviderOperations:t,getStorageProvider:h,resourceSources:s.a,resourceExternalEditors:l.a,extensionsLoader:v()({gd:D,objectsEditorService:g.a,objectsRenderingService:b.a,filterExamples:!n}),initialFileMetadataToOpen:m})}))}))}}.call(this,n(25))},561:function(e,t,n){"use strict";(function(e){var r=n(20),o=n.n(r),a=n(1126),i=o()("fs-extra"),c=o()("path"),u=o()("os"),s=e.gd;t.a={mkDir:function(e){try{i.mkdirsSync(e)}catch(t){return console.error("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return i.existsSync(e)},clearDir:function(e){try{i.emptyDirSync(e)}catch(t){console.error("clearDir("+e+") failed: "+t)}},getTempDir:function(){return c.join(u.tmpdir(),"GDTMP-".concat(Object(a.a)()))},fileNameFrom:function(e){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.basename(e))},dirNameFrom:function(e){return this._isExternalUrl(e)?"":(e=this._translateUrl(e),c.dirname(e).replace(/\\/g,"/"))},makeAbsolute:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),this.isAbsolute(t)||(t=c.resolve(t)),c.resolve(t,c.normalize(e)).replace(/\\/g,"/"))},makeRelative:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.relative(t,c.normalize(e)).replace(/\\/g,"/"))},isAbsolute:function(e){return!!this._isExternalUrl(e)||(0===e.length||((e=this._translateUrl(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalUrl(e))return!0;e=this._translateUrl(e);try{e!==t&&i.copySync(e,t)}catch(n){return console.error("copyFile("+e+", "+t+") failed: "+n),!1}return!0},writeToFile:function(e,t){try{i.outputFileSync(e,t)}catch(n){return console.error("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return i.readFileSync(e).toString()}catch(t){return console.error("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new s.VectorString;try{i.existsSync(e)&&i.readdirSync(e).forEach((function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)}))}catch(r){console.error("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateUrl(e);try{return i.statSync(e).isFile()}catch(t){return!1}},_isExternalUrl:function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},_translateUrl:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(25))},737:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(20),o=n.n(r),a=n(807),i=o()("fs"),c=Object(a.a)("archiver"),u=function(e){var t=e.path,n=e.outputFilename,r=e.sizeLimit,o=c();return new Promise((function(e,a){if(!i||!o)return a(new Error("Archiver unavailable"));var c=i.createWriteStream(n),u=o("zip",{zlib:{level:9}});c.on("close",(function(){var t=u.pointer();if(console.log("Archive written at ".concat(n,", ").concat(t,"} total bytes.")),r&&t>r){var o=Math.round(t/1e6);a(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(r/1e6," MB.")))}e(n)})),u.on("error",(function(e){a(e)})),u.pipe(c),u.directory(t,!1),u.finalize()}))}},870:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i=function(e,t,n){return a?(a.removeAllListeners("local-file-upload-progress"),a.removeAllListeners("local-file-upload-done"),new Promise((function(r,o){a.on("local-file-upload-progress",(function(e,t,r){n(t,r)})),a.on("local-file-upload-done",(function(e,t){if(t)return o(t);r()})),a.send("local-file-upload",e,t)}))):Promise.reject("No support for local file upload")}}}]);
//# sourceMappingURL=local-app.6a2560d6.chunk.js.map